# $Id: FAQ,v 1.5 2007/05/13 20:49:37 lizhijie Exp $

                FAQ for PBX
                     Li Zhijie 2007.03.01

IP呼叫PSTN外线和分机   2007.05.12
    Dialing状态下，判断号码，查找号码对应的设备，成功后进入RINGING状态
    RINGING状态的进入操作，执行QueryStatus，即向IP发出DIALING命令
        成功后，在OpBranchIdle中向设备发出RingStart命令，这个命令时间发
        出被叫号码
    
    被叫号码是以号码查找本地分机设备，找不到分机设备就选择外线设备，并
    将号码付给该外线设备。在ringing操作中，直接使用该外线设备被赋予的号
    码，发送给STC
    

IP向STC PBX发出来电显示的号码


拨号方案 2007.03.07
    拨号方案分为使用代理服务器和不使用代理服务器两种
    
    使用代理服务器
       除了本地分机之间的IP呼叫外，全部使用代理服务器
       本地分机自己的IP呼叫，使用地址为127.0.0.1,而不是实际的IP地址
    
       


主机名问题
    代码在启动进入main函数前，首先检查主机名并解析IP地址（SysInfo和NetworkConfig）
    如果hostname得到的主机名不能解析出IP地址，则程序不能启动

调试选项
    编译时，定义宏__AS_RELEASE__，然后在程序中将cpLog和cpDebug分开使用
    可以将调试代码和日志代码分开
    
    必须在VoipLib模块和Pbx模块两个模块中，保持同样的编译选项


网络接口
    自动根据路由完成呼叫，而不是只能从WAN口完成呼叫
    

注册服务FAQ
    注册服务器主要决定于呼入的方式是否可以通过服务器形式呼入。这不是
    强制性的，即即使注册成功，对方也可能直接呼入。
    即使注册服务器的action选定为proxy形式，也是如此：这个action只是通
    知注册服务器，需要执行的后续动作类型
    
    打开和关闭注册服务器的开关
        RegisterON 字段为真时，需要注册
    注册及其认证使用的用户名
        注册使用的信息
            RegisterServer决定注册服务器的地址和端口号
            RegisterFrom和RegisterTo字段分别决定RegisterMsg的from和to字段的主机端口信息
            本地拨号的电话号码用作from和to字段的user字段，其中to字段的user用户注册时的用户认证
            主机地址包含在via和contact字段内
            
代理服务器
    决定呼叫的输出方式：即呼出时，是否使用代理的模式。
    
    一旦选定使用代理服务器后，后续所有的呼叫，包括快速拨号规则中已经定义IP地址的呼叫，
    都使用代理服务器完成。
    
    这是合理的。
    
    